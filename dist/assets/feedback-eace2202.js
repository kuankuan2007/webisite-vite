import{_ as e,d as a,o as l,r as t,a as s,b as u,e as r,f as i,F as n,g as d,h as o,w as f,i as c,t as p,n as h,u as v,j as m,p as b,k as y,l as g,m as w}from"./all-44010498.js";import{m as _}from"./header-9ab5142f.js";const G=e({__name:"waterfallFlow",props:{valueList:{type:Array,default:[],required:!0},eleWidth:{type:Number,default:0,required:!0},rowGap:{type:Number,default:10,required:!1},columnGap:{type:Number,default:10,required:!1},debounceDelay:{type:Number,default:300,required:!1}},setup(e){const d=e;let o=a((function(){if(null===c.value)return;const e=c.value;let a=e.children;if(0===a.length)return;const l=e.clientWidth,t=Math.min(a.length,Math.max(1,Math.floor(l/(d.eleWidth+d.columnGap))));t<=1&&(d.columnGap=0);const s=Array(t).fill(0),u=(l-t*d.eleWidth-(t-1)*d.columnGap)/2;for(let r=0;r<a.length;r++){const e=a[r];e.style.width=`${d.eleWidth}px`;let l=1/0,t=0;for(let a=0;a<s.length;a++)s[a]<l&&(l=s[a],t=a);e.style.top=`${l}px`,e.style.left=`${u+t*(d.eleWidth+d.columnGap)}px`,s[t]+=e.clientHeight+d.rowGap}e.style.height=Math.max(...s)-d.rowGap+"px"}),d.debounceDelay);l((()=>{f.observe(c.value,{childList:!0,subtree:!0}),p.value.contentWindow.addEventListener("resize",(()=>{o()}),!1)}));let f=new MutationObserver(o),c=t(null),p=t(null);return(a,l)=>(s(),u(n,null,[r("div",{class:"watterfall",ref_key:"watterfall",ref:c},[i(a.$slots,"default",{valueList:e.valueList},void 0,!0)],512),r("iframe",{class:"size-tester",ref_key:"sizeTester",ref:p},null,512)],64))}},[["__scopeId","data-v-7e83f0e3"]]),W={class:"list"},k=(e=>(b("data-v-f48e7bb4"),e=e(),y(),e))((()=>r("a",{class:"add",href:"/feedback/new/"},[r("span",{class:"demo-icon"},""),g("新建")],-1))),L=["href"],x={class:"item-padding"},M={class:"time"},q={class:"user"},$=e({__name:"feedbackList",setup(e){let a=d([]),l=t(!0),i=t("");function b(){l.value=!1,i.value="加载中";let e=a.length,t=e+40;m(e,t).then((s=>{if(!l.value){if(null===s)return showMessage("无法获取更多的反馈"),void(l.value=!1);s.length<t-e+1?(l.value=!1,i.value="暂时没有更多啦"):(l.value=!0,i.value="更多"),e+=s.length,t+=s.length;for(var u=0;u<s.length;u++)a.push(s[u])}}))}return b(),(e,t)=>(s(),u("div",W,[k,o(G,{eleWidth:300,"value-list":v(a),class:"watterfall"},{default:f((({valueList:e})=>[(s(!0),u(n,null,c(e,(e=>(s(),u("a",{href:`/feedback/data/?id=${e.id}`,class:"item"},[r("div",x,[r("h2",null,p(e.title),1),r("p",M,p(e.time),1),r("p",q,p(e.user),1),r("p",{class:h(["statue",e.statue])},p(e.statue),3)])],8,L)))),256))])),_:1},8,["value-list"]),r("p",{class:h({disabled:!v(l),more:!0}),onClick:b},p(v(i)),3)]))}},[["__scopeId","data-v-f48e7bb4"]]);w({__name:"App",setup:e=>(e,a)=>(s(),u(n,null,[o(_,{title:"宽宽2007·反馈"}),o($)],64))}).mount("#app");
