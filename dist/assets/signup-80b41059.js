import{_ as e,a,y as l,o as t,b as s,d as u,e as r,u as n,q as i,n as d,j as v,v as o,F as p,s as f,z as m,A as b,l as y,p as c,f as k,i as g}from"./all-b9340eea.js";import{m as h}from"./header-795b47a1.js";import{i as x}from"./text-0fe24a9a.js";import{i as _,a as j}from"./date-78f42445.js";import{i as w}from"./button-8505e708.js";import{i as I,a as $}from"./emailCode-824413c3.js";import"./selecter-87953a55.js";const U={class:"main"},z=(e=>(c("data-v-37ef406a"),e=e(),k(),e))((()=>r("h1",{class:"title"},"注册",-1))),A={class:"bottom-button"},C=["href"],D=["href"];g(e({__name:"App",setup(e){let c=a(""),k=a(""),g=a(""),Z=a(""),q=a(""),F=l(new Date(1970,0,1)),R=a("保密"),S=a(""),B=a(null),E=a(null),G=a(null),H=a(null),J=a(null),K=a(null),L=[B,Z,E,G,H,K],M=a(0);function N(){if(0==M.value){for(let e of L){if(-1==e.value.wrong)return void f(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void f(e.value.reminder[e.value.wrong-1])}m(c.value,S.value).then((e=>{null===e?M.value=1:f(e.msg)}))}else 1==M.value?q.value.check().then((()=>{M.value=2})):2==M.value&&J.value.check().then((()=>{b(c.value,S.value,F.value,R.value,k.value)}))}return(e,a)=>(t(),s(p,null,[u(h,{title:"注册",jump:"/user/"}),r("div",U,[z,0==n(M)||1==n(M)?(t(),i(x,{key:0,ref_key:"usernameInput",ref:B,class:d(["input-box",{disabled:0!=n(M)}]),type:"text",title:"用户名",value:n(c),"onUpdate:value":a[0]||(a[0]=e=>v(c)?c.value=e.target.value:c=e.target.value),reminder:["用户名必须是2-32个非空白字符"],tester:e=>/^\S{2,32}$/.test(e)?0:1,disabled:n(M)>0},null,8,["class","value","tester","disabled"])):o("",!0),0==n(M)||2==n(M)?(t(),i(x,{key:1,ref_key:"emailInput",ref:Z,class:d(["input-box",{disabled:0!=n(M)}]),type:"email",title:"邮箱",value:n(S),"onUpdate:value":a[1]||(a[1]=e=>v(S)?S.value=e.target.value:S=e.target.value),reminder:["邮箱格式不正确"],tester:e=>/^[\w.%+-]+@(?:[^/\\\.&\?\#]+\.)+[^/\\\.&\?\#]+$/.test(e)?0:1,disabled:n(M)>0},null,8,["class","value","tester","disabled"])):o("",!0),0==n(M)?(t(),i(x,{key:2,ref_key:"passwordInput",ref:E,class:"input-box",type:"password",title:"密码",value:n(k),"onUpdate:value":a[2]||(a[2]=e=>v(k)?k.value=e.target.value:k=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(n(G).refreshReminder(n(g),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3),disabled:n(M)>0},null,8,["value","tester","disabled"])):o("",!0),0==n(M)?(t(),i(x,{key:3,ref_key:"passwordInput2",ref:G,class:"input-box",type:"password",title:"确认密码",value:n(g),disabled:n(M)>0,"onUpdate:value":a[3]||(a[3]=e=>v(g)?g.value=e.target.value:g=e.target.value),reminder:["密码不匹配"],tester:(e,a=n(k))=>e===a?0:1},null,8,["value","disabled","tester"])):o("",!0),0==n(M)?(t(),i(_,{key:4,ref_key:"birthDateInput",ref:H,"onUpdate:date":a[4]||(a[4]=e=>v(F)?F.value=e:F=e),style:{"z-index":"1"},value:n(F),disabled:n(M)>0,class:"input-box",title:"出生日期",reminder:["出生日期应在当前日期之前"],tester:e=>e>new Date?1:0},null,8,["value","disabled","tester"])):o("",!0),0==n(M)?(t(),i(j,{key:5,ref_key:"sexInput",ref:K,"onUpdate:value":a[5]||(a[5]=e=>v(R)?R.value=e:R=e),style:{"z-index":"0"},value:n(R),class:"input-box",title:"性别",disabled:n(M)>0},null,8,["value","disabled"])):o("",!0),1==n(M)?(t(),i(I,{key:6,class:"input-box",ref_key:"imageCodeInput",ref:q},null,512)):o("",!0),2==n(M)?(t(),i($,{key:7,class:"input-box",ref_key:"emailCodeInput",ref:J},null,512)):o("",!0),u(w,{value:2!=n(M)?"下一步":"完成",onClick:N},null,8,["value"]),r("div",A,[r("p",null,[r("a",{href:`/login/reset/?from=${n(y)("from","/")}`},"忘记密码",8,C)]),r("p",null,[r("a",{href:`/login/?from=${n(y)("from","/")}`},"登录",8,D)])])])],64))}},[["__scopeId","data-v-37ef406a"]])).mount("#app");
