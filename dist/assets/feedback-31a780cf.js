import{_ as e,o as a,r as l,a as t,b as s,d as u,e as r,F as i,f as n,g as d,w as o,h as f,t as c,n as p,u as h,i as v,p as m,j as b,k as y,l as g}from"./all-d17ae10d.js";import{d as w,m as _}from"./header-ccd47c63.js";const G=e({__name:"waterfallFlow",props:{valueList:{type:Array,default:[],required:!0},eleWidth:{type:Number,default:0,required:!0},rowGap:{type:Number,default:10,required:!1},columnGap:{type:Number,default:10,required:!1},debounceDelay:{type:Number,default:300,required:!1}},setup(e){const n=e;let d=w((function(){if(null===f.value)return;const e=f.value;let a=e.children;if(0===a.length)return;const l=e.clientWidth,t=Math.min(a.length,Math.max(1,Math.floor(l/(n.eleWidth+n.columnGap))));t<=1&&(n.columnGap=0);const s=Array(t).fill(0),u=(l-t*n.eleWidth-(t-1)*n.columnGap)/2;for(let r=0;r<a.length;r++){const e=a[r];e.style.width=`${n.eleWidth}px`;let l=1/0,t=0;for(let a=0;a<s.length;a++)s[a]<l&&(l=s[a],t=a);e.style.top=`${l}px`,e.style.left=`${u+t*(n.eleWidth+n.columnGap)}px`,s[t]+=e.clientHeight+n.rowGap}e.style.height=Math.max(...s)-n.rowGap+"px"}),n.debounceDelay);a((()=>{o.observe(f.value,{childList:!0,subtree:!0}),c.value.contentWindow.addEventListener("resize",(()=>{d()}),!1)}));let o=new MutationObserver(d),f=l(null),c=l(null);return(a,l)=>(t(),s(i,null,[u("div",{class:"watterfall",ref_key:"watterfall",ref:f},[r(a.$slots,"default",{valueList:e.valueList},void 0,!0)],512),u("iframe",{class:"size-tester",ref_key:"sizeTester",ref:c},null,512)],64))}},[["__scopeId","data-v-7e83f0e3"]]),W={class:"list"},k=(e=>(m("data-v-f48e7bb4"),e=e(),b(),e))((()=>u("a",{class:"add",href:"/feedback/new/"},[u("span",{class:"demo-icon"},""),y("新建")],-1))),L=["href"],x={class:"item-padding"},M={class:"time"},q={class:"user"},$=e({__name:"feedbackList",setup(e){let a=n([]),r=l(!0),m=l("");function b(){r.value=!1,m.value="加载中";let e=a.length,l=e+40;v(e,l).then((t=>{if(!r.value){if(null===t)return showMessage("无法获取更多的反馈"),void(r.value=!1);t.length<l-e+1?(r.value=!1,m.value="暂时没有更多啦"):(r.value=!0,m.value="更多"),e+=t.length,l+=t.length;for(var s=0;s<t.length;s++)a.push(t[s])}}))}return b(),(e,l)=>(t(),s("div",W,[k,d(G,{eleWidth:300,"value-list":h(a),class:"watterfall"},{default:o((({valueList:e})=>[(t(!0),s(i,null,f(e,(e=>(t(),s("a",{href:`/feedback/data/?id=${e.id}`,class:"item"},[u("div",x,[u("h2",null,c(e.title),1),u("p",M,c(e.time),1),u("p",q,c(e.user),1),u("p",{class:p(["statue",e.statue])},c(e.statue),3)])],8,L)))),256))])),_:1},8,["value-list"]),u("p",{class:p({disabled:!h(r),more:!0}),onClick:b},c(h(m)),3)]))}},[["__scopeId","data-v-f48e7bb4"]]);g({__name:"App",setup:e=>(e,a)=>(t(),s(i,null,[d(_,{title:"宽宽2007·反馈"}),d($)],64))}).mount("#app");
