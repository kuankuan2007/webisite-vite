import{_ as e,a as t,a0 as a,J as s,I as l,o as n,b as o,e as i,K as r,L as d,u as c,d as u,j as m,h,v as p,F as v,N as g,w,a1 as f,n as y,t as k,a2 as S,p as E,f as C}from"./all-b9340eea.js";import"./header-795b47a1.js";import{_}from"./markdownShower-56d21add.js";const x=e=>(E("data-v-1ddf1fc9"),e=e(),C(),e),H=["value"],j={class:"buttons"},B=x((()=>i("span",{class:"demo-icon"},"",-1))),L=x((()=>i("span",{class:"demo-icon"},"",-1))),O=["onClick","innerHTML"],$={class:"content"},b={class:"names"},I=["onClick"],T={class:"title"},D=["src"],N=e({__name:"markDownEditor",props:{headerLevelStart:{type:Number,default:1,required:!1},content:{type:String,default:"",required:!0},otherButtons:{type:Array,default:[],required:!1}},emits:["update:content","customButtomClick"],setup(e,{expose:E,emit:C}){const x=e;let N=t(null),z={display:{horizontal:"左右",vertical:"上下",hidden:"隐藏"}},J=a(x.content,500);s((()=>{J.value=x.content}));let q=t("editer"),M={display:"horizontal"},U=JSON.parse(localStorage.getItem("markdownEditorSettings")),A=t(Object.assign({},M,U));function F(){U=JSON.parse(localStorage.getItem("markdownEditorSettings")),A.value=Object.assign({},M,U);for(let e in A.value)N.value.dataset[`markdownEditorTheme${e.slice(0,1).toUpperCase()+e.slice(1)}`]=A.value[e];P()}function K(e){P(),C("update:content",e)}function P(){G.value.style.minHeight="unset",R.value.showBox.style.minHeight="unset",N.value.style.minHeight="unset";let e=G.value.scrollHeight-20;G.value.style.minHeight=`${e}px`,R.value.showBox.style.minHeight=`${e}px`,N.value.style.minHeight=`${e+20}px`}let R=t(null),G=t(null);function Q(){V.value.close()}l((()=>{F(),window.addEventListener("localStorageSetItemEvent",(e=>{"markdownEditorSettings"===e.key&&F()})),window.addEventListener("storage",(e=>{"markdownEditorSettings"===e.key&&F()})),P()}));let V=t(null);function W(e){V.value.showModal()}function X(e){return new URL(Object.assign({"../image/markDownThemeShower/display-hidden.svg":"/assets/display-hidden-3a1e156d.svg","../image/markDownThemeShower/display-horizontal.svg":"/assets/display-horizontal-99f993ff.svg","../image/markDownThemeShower/display-vertical.svg":"/assets/display-vertical-f3a1e42c.svg"})[`../image/markDownThemeShower/${e}.svg`],self.location).pathname}return E({editer:G}),(e,t)=>(n(),o(v,null,[i("div",{class:"markdownEditor",ref_key:"markdownEditor",ref:N},[r(i("textarea",{ref_key:"editer",ref:G,class:"editor",value:c(x).content,onInput:K},null,40,H),[[d,"hidden"!==c(A).display||"editer"===c(q)]]),r(u(_,{ref_key:"shower",ref:R,class:"shower",content:c(J),"header-level-start":c(x).headerLevelStart},null,8,["content","header-level-start"]),[[d,"hidden"!==c(A).display||"shower"===c(q)]]),i("div",j,["hidden"===c(A).display?r((n(),o("p",{key:0,onClick:t[0]||(t[0]=e=>m(q)?q.value="shower":q="shower"),class:"showShowerButton"},[h("预览"),B],512)),[[d,"editer"===c(q)]]):p("",!0),"hidden"===c(A).display?r((n(),o("p",{key:1,onClick:t[1]||(t[1]=e=>m(q)?q.value="editer":q="editer"),class:"showEditerButton"},[h("编辑"),L],512)),[[d,"shower"===c(q)]]):p("",!0),i("p",{class:"demo-icon setting",onClick:W},""),(n(!0),o(v,null,g(c(x).otherButtons,(e=>(n(),o("p",{onClick:t=>{return a=e.event,void C("customButtomClick",a);var a},innerHTML:e.inner},null,8,O)))),256))])],512),u(S,{class:"setting-dialog",ref_key:"settingDialog",ref:V},{default:w((()=>[i("div",$,[i("ul",b,[(n(!0),o(v,null,g(c(z),((e,t)=>(n(),o("li",null,[i("ul",{class:"values",style:f(`grid-template-columns: repeat(${Object.getOwnPropertyNames(e).length},minmax(0px,1fr));`)},[(n(!0),o(v,null,g(e,((e,a)=>(n(),o("li",{class:y({choice:a===c(A)[t]}),onClick:e=>function(e,t){A.value[e]=t,localStorage.setItem("markdownEditorSettings",JSON.stringify(A.value))}(t,a)},[i("p",T,k(e),1),i("img",{src:X(`${t}-${a}`)},null,8,D)],10,I)))),256))],4)])))),256))])]),i("p",{class:"close demo-icon",onClick:Q},"")])),_:1},512)],64))}},[["__scopeId","data-v-1ddf1fc9"]]);export{N as m};
