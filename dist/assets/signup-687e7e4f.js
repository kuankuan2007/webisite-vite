import{_ as e,r as t,o as a,J as l,a as r,b as s,e as u,t as n,u as i,h as d,w as o,T as c,n as v,q as p,v as f,l as m,p as g,k as y,H as h,K as b,L as _,M as k,N as x,O as w,E as S,s as I,x as q,F as A,A as U,P as $,Q as C,C as D,m as F}from"./all-a4169b37.js";import{m as j}from"./header-9e49871e.js";import{i as z,a as Y}from"./button-8df87101.js";import{m as B}from"./selecter-69c2f209.js";const G={class:"input-group"},M={class:"reminder"},P=(e=>(g("data-v-c847c075"),e=e(),y(),e))((()=>u("span",{class:"demo-icon"},"",-1))),R=e({__name:"sex",props:{title:{type:String,required:!1,default:"日期"},value:{type:String,required:!0,default:"保密"},tester:{type:Function,default:()=>0,required:!1},reminder:{type:Array,default:["内容格式不正确"],required:!1},disabled:{type:Boolean,required:!1,default:!1}},emits:["update:value"],setup(e,{expose:g,emit:y}){const h=e;let b=t(0);function _(e,...t){b.value=h.tester(e,...t)}let k=t(null),x=t(null);return a((()=>{l((()=>{h.title,k.value.style.setProperty("--title-width",`${x.value.clientWidth}px`)}))})),g({wrong:b,reminder:h.reminder,title:h.title,refreshReminder:_}),(e,t)=>(r(),s("div",{class:v(["main-box",{disabled:i(h).disabled}]),ref_key:"inputGroup",ref:k},[u("div",G,[u("p",{class:"title",ref_key:"title",ref:x},n(i(h).title),513),d(B,{"onUpdate:choice":t[0]||(t[0]=e=>{return _(t=e),void y("update:value",t);var t}),class:"selecter",values:["保密","男","女","其他"],choice:i(h).value},null,8,["choice"])]),d(c,{name:"reminder"},{default:o((()=>[p(u("p",M,[P,m(n(i(h).reminder[i(b)-1]),1)],512),[[f,0!=i(b)]])])),_:1})],2))}},[["__scopeId","data-v-c847c075"]]),T=e=>(g("data-v-27a23105"),e=e(),y(),e),W={class:"input-group"},Z=T((()=>u("p",null,"年",-1))),E=T((()=>u("p",null,"月",-1))),H=T((()=>u("p",null,"日",-1))),J={class:"reminder"},K=T((()=>u("span",{class:"demo-icon"},"",-1))),L=e({__name:"date",props:{title:{type:String,required:!1,default:"日期"},value:{type:Date,required:!0,default:new Date(2e3,1,1)},tester:{type:Function,default:()=>0,required:!1},reminder:{type:Array,default:["内容格式不正确"],required:!1},disabled:{type:Boolean,required:!1,default:!1}},emits:["update:date"],setup(e,{expose:g,emit:y}){const b=e;let _=t(0);function k(e,...t){_.value=b.tester(e,...t)}function x(e,t){let a=new Date(b.value);"year"===e&&a.setFullYear(parseInt(t,10)),"mounth"===e&&a.setMonth(parseInt(t,10)-1),"date"===e&&a.setDate(parseInt(t,10)),k(a),y("update:date",a)}let w=t(null),S=t(null);a((()=>{l((()=>{b.title,w.value.style.setProperty("--title-width",`${S.value.clientWidth}px`)}))}));let I=h((()=>{let e=b.value.getMonth()+1;return 2==e?b.value.getFullYear()%4==0&&b.value.getFullYear()%100!=0||b.value.getFullYear()%400==0?Array.from({length:29},((e,t)=>(t+1).toString())):Array.from({length:28},((e,t)=>(t+1).toString())):e<=7?e%2==0?Array.from({length:30},((e,t)=>(t+1).toString())):Array.from({length:31},((e,t)=>(t+1).toString())):e%2==0?Array.from({length:31},((e,t)=>(t+1).toString())):Array.from({length:30},((e,t)=>(t+1).toString()))}));return g({wrong:_,reminder:b.reminder,title:b.title,refreshReminder:k}),(e,t)=>(r(),s("div",{class:v(["main-box",{disabled:i(b).disabled}]),ref_key:"inputGroup",ref:w},[u("div",W,[u("p",{class:"title",ref_key:"title",ref:S},n(i(b).title),513),d(B,{"onUpdate:choice":t[0]||(t[0]=e=>x("year",e)),class:"selecter",values:Array.from({length:200},((e,t)=>(t+1900).toString())),choice:i(b).value.getFullYear().toString()},null,8,["values","choice"]),Z,d(B,{"onUpdate:choice":t[1]||(t[1]=e=>x("mounth",e)),class:"selecter",values:Array.from({length:12},((e,t)=>(t+1).toString())),choice:(i(b).value.getMonth()+1).toString()},null,8,["values","choice"]),E,d(B,{"onUpdate:choice":t[2]||(t[2]=e=>x("date",e)),class:"selecter",values:i(I),choice:i(b).value.getDate().toString()},null,8,["values","choice"]),H]),d(c,{name:"reminder"},{default:o((()=>[p(u("p",J,[K,m(n(i(b).reminder[i(_)-1]),1)],512),[[f,0!=i(_)]])])),_:1})],2))}},[["__scopeId","data-v-27a23105"]]),N={class:"input-group",ref:"inputGroup"},O={class:"code-box"},Q={class:"code-click"},V=["src"],X=[(e=>(g("data-v-65b13aca"),e=e(),y(),e))((()=>u("p",null,"点击刷新",-1)))],ee=e({__name:"imageCode",props:{title:{type:String,default:"验证码",required:!1},disabled:{type:Boolean,required:!1,default:!1}},setup(e,{expose:a}){const l=e;let n=t(""),o=t("");function c(){b().then((e=>{o.value=e}),(e=>{}))}function v(e){n.value=e.target.value}return c(),a({check:async function(){if(!(await _(n.value)))throw void 0},refresh:c}),(e,t)=>(r(),s("div",N,[d(z,{value:i(n),"onUpdate:value":v,title:i(l).title,reminder:["图片验证码应是四位字母/数字"],tester:e=>/^[a-z0-9]{4}$/.test(e)?0:1},null,8,["value","title","tester"]),u("div",O,[u("div",Q,[u("img",{class:"img",src:i(o)},null,8,V),u("div",{class:"refresh",onClick:c},X)])])],512))}},[["__scopeId","data-v-65b13aca"]]),te={class:"input-group",ref:"inputGroup"},ae={class:"code-box"},le={class:"code-click"},re=e({__name:"emailCode",props:{title:{type:String,default:"验证码",required:!1},disabled:{type:Boolean,required:!1,default:!1}},setup(e,{expose:a}){const l=e;let o=t(""),c=t(0);function p(e){e<0?c.value=0:(c.value=e,setTimeout(p,1e3,e-1))}function f(){k().then((()=>{p(60)}),(e=>{}))}function m(e){o.value=e.target.value}return f(),a({check:async function(){if(!(await x(o.value)))throw void 0},refresh:f}),(e,t)=>(r(),s("div",te,[d(z,{value:i(o),"onUpdate:value":m,title:i(l).title,reminder:["图片验证码应是6位数字"],tester:e=>/^[0-9]{6}$/.test(e)?0:1},null,8,["value","title","tester"]),u("div",ae,[u("div",le,[u("div",{class:v(["refresh",{disabled:i(c)>0}]),onClick:f},[u("p",null,n(i(c)>0?`${i(c)}s`:"重新发送"),1)],2)])])],512))}},[["__scopeId","data-v-92fdbea9"]]),se=e=>(g("data-v-fc58c77a"),e=e(),y(),e),ue={class:"main"},ne=se((()=>u("h1",{class:"title"},"注册",-1))),ie={class:"bottom-button"},de=se((()=>u("p",null,"忘记密码",-1))),oe=["href"];F(e({__name:"App",setup(e){let a=t(""),l=t(""),n=t(""),o=t(""),c=t(""),p=w(new Date(1970,0,1)),f=t("保密"),m=t(""),g=t(null),y=t(null),h=t(null),b=t(null),_=t(null),k=t(null),x=[g,o,y,h,b,k],F=t(0);function B(){if(0==F.value){for(let e of x){if(-1==e.value.wrong)return void U(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void U(e.value.reminder[e.value.wrong-1])}$(a.value,m.value).then((e=>{null===e?F.value=1:U(e.msg)}))}else 1==F.value?c.value.check().then((()=>{F.value=2})):2==F.value&&_.value.check().then((()=>{C(a.value,m.value,p.value,f.value,l.value)}))}return(e,t)=>(r(),s(A,null,[d(j,{title:"注册",jump:"/user/"}),u("div",ue,[ne,0==i(F)||1==i(F)?(r(),S(z,{key:0,ref_key:"usernameInput",ref:g,class:v(["input-box",{disabled:0!=i(F)}]),type:"text",title:"用户名",value:i(a),"onUpdate:value":t[0]||(t[0]=e=>I(a)?a.value=e.target.value:a=e.target.value),reminder:["用户名必须是2-32个非空白字符"],tester:e=>/^\S{2,32}$/.test(e)?0:1,disabled:i(F)>0},null,8,["class","value","tester","disabled"])):q("",!0),0==i(F)||2==i(F)?(r(),S(z,{key:1,ref_key:"emailInput",ref:o,class:v(["input-box",{disabled:0!=i(F)}]),type:"email",title:"邮箱",value:i(m),"onUpdate:value":t[1]||(t[1]=e=>I(m)?m.value=e.target.value:m=e.target.value),reminder:["邮箱格式不正确"],tester:e=>/^[\w.%+-]+@(?:[^/\\\.&\?\#]+\.)+[^/\\\.&\?\#]+$/.test(e)?0:1,disabled:i(F)>0},null,8,["class","value","tester","disabled"])):q("",!0),0==i(F)?(r(),S(z,{key:2,ref_key:"passwordInput",ref:y,class:"input-box",type:"password",title:"密码",value:i(l),"onUpdate:value":t[2]||(t[2]=e=>I(l)?l.value=e.target.value:l=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(i(h).refreshReminder(i(n),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3),disabled:i(F)>0},null,8,["value","tester","disabled"])):q("",!0),0==i(F)?(r(),S(z,{key:3,ref_key:"passwordInput2",ref:h,class:"input-box",type:"password",title:"确认密码",value:i(n),disabled:i(F)>0,"onUpdate:value":t[3]||(t[3]=e=>I(n)?n.value=e.target.value:n=e.target.value),reminder:["密码不匹配"],tester:(e,t=i(l))=>e===t?0:1},null,8,["value","disabled","tester"])):q("",!0),0==i(F)?(r(),S(L,{key:4,ref_key:"birthDateInput",ref:b,"onUpdate:date":t[4]||(t[4]=e=>I(p)?p.value=e:p=e),style:{"z-index":"1"},value:i(p),disabled:i(F)>0,class:"input-box",title:"出生日期",reminder:["出生日期应在当前日期之前"],tester:e=>e>new Date?1:0},null,8,["value","disabled","tester"])):q("",!0),0==i(F)?(r(),S(R,{key:5,ref_key:"sexInput",ref:k,"onUpdate:value":t[5]||(t[5]=e=>I(f)?f.value=e:f=e),style:{"z-index":"0"},value:i(f),class:"input-box",title:"性别",disabled:i(F)>0},null,8,["value","disabled"])):q("",!0),1==i(F)?(r(),S(ee,{key:6,class:"input-box",ref_key:"imageCodeInput",ref:c},null,512)):q("",!0),2==i(F)?(r(),S(re,{key:7,class:"input-box",ref_key:"emailCodeInput",ref:_},null,512)):q("",!0),d(Y,{value:2!=i(F)?"下一步":"完成",onClick:B},null,8,["value"]),u("div",ie,[de,u("p",null,[u("a",{href:`/login/?from=${i(D)("from","/")}`},"登录",8,oe)])])])],64))}},[["__scopeId","data-v-fc58c77a"]])).mount("#app");
