import{c as e}from"./all-a1f15435.js";function t(e,t,i,n){return function(s){return s<=e?i:s>=t?n:i+(s-e)/(t-e)*(n-i)}}function i(e,t){return Math.random()*(t+1-e)+e}class n{constructor(e=window.innerHeight,t=window.innerWidth){this.size=i(0,Math.min(e,t)/6),this.color={r:i(0,255),g:i(0,255),b:i(0,255)},this.left=i(-this.size/2,t/2.5)+Math.floor(2*Math.random())*t*.6,this.top=i(-this.size/2,e/2.5)+Math.floor(2*Math.random())*e*.6,this.rotate=0,this.rotateX=0,this.rotateY=0,this.ele=document.createElement("div"),this.root=document.createElement("div"),this.root.appendChild(this.ele),this.ele.style.opacity="0.7",this.ele.classList.add("colorblock"),this.root.classList.add("colorblockRoot"),this.z=i(.5,1.5),this.refresh()}refresh(){this.ele.style.left=this.left+"px",this.ele.style.top=this.top+"px",this.ele.style.width=this.size+"px",this.ele.style.height=this.size+"px",this.ele.style.backgroundColor=`rgb(${this.color.r},${this.color.g},${this.color.b})`,this.ele.style.transform=`rotate(${this.rotate}deg) rotateX(${this.rotateX}deg) rotateY(${this.rotateY}deg)`}scroll(e){}}class s extends n{constructor(){super(),document.getElementById("startBG").appendChild(this.root),this.startIn()}startIn(){this.ele.style.transform=`translate(${window.innerWidth/2-this.left}px,${window.innerHeight/2-this.top}px) scale(0) rotate(${this.rotate+i(-50,50)}deg) rotateX(${this.rotateX+i(-50,50)}deg) rotateY(${this.rotateY+i(-50,50)}deg)`,this.ele.style.opacity="0.3",setTimeout((()=>{this._startOut()}),0)}_startOut(){this.ele.style.transform=`translate(0px,0px) scale(1) rotate(${this.rotate}deg) rotateX(${this.rotateX}deg) rotateY(${this.rotateY}deg)`,this.ele.style.opacity="0.7"}}class o extends n{constructor(e=window.innerHeight,t=window.innerWidth){super(e,t),document.getElementById("eleBG").appendChild(this.root),this.refreshAnimation()}refreshAnimation(){this.animation=new w([this.ele],{transform:"translate({0}px,{1}px)"},window.innerHeight,2*window.innerHeight,[[0,1/(window.innerWidth/2-this.left)*-30*window.innerWidth],[0,1/(window.innerHeight/2-this.top)*-30*window.innerHeight]])}}class r extends n{constructor(e,t=window.innerHeight,i=window.innerWidth){super(t,i),this.pageNum=e,this.refresh(),document.getElementById("colorBlocks").appendChild(this.root)}refresh(){this.ele.style.left=this.left+"px",this.ele.style.top=this.top+(this.pageNum+3)*window.innerHeight+"px",this.ele.style.width=this.size+"px",this.ele.style.height=this.size+"px",this.ele.style.backgroundColor=`rgb(${this.color.r},${this.color.g},${this.color.b})`,this.ele.style.transform=`rotate(${this.rotate}deg) rotateX(${this.rotateX}deg) rotateY(${this.rotateY}deg)`}}var l,h,a="如果说，青春如烟，仅此一场，放肆冲动，我会将什么故事写在过去散在风中。即便此刻两手空空，即便隐隐作痛，要记得时而抬起头，仰望星空，拥抱彩虹。",d={start:[],eles:[],ends:[]};function c(e){0!=e.length?(document.getElementById("sign").innerText=document.getElementById("sign").innerText+e.slice(0,1),setTimeout(c,80,e.slice(1,e.length))):setTimeout((()=>{document.getElementById("sign").classList.add("finish")}),1e3)}Object.defineProperty(d,"all",{get:()=>{for(var e=d.start.concat(d.eles),t=0;t<d.ends.length;t++)e=e.concat(d.ends[t]);return e}});var g=0;class w{constructor(e,i,n,s,o){this.targets=e,this.styles=i,this.getValue=[];for(var r=0;r<o.length;r++)this.getValue.push(t(n,s,o[r][0],o[r][1]))}change(e){for(var t=[],i=0;i<this.getValue.length;i++)t.push(this.getValue[i](e));for(i in this.styles){for(var n=this.styles[i],s=0;s<t.length;s++)n=n.replace(`{${s}}`,t[s]+"");for(s=0;s<this.targets.length;s++)this.targets[s].style[i]=n}}}var m=[];function u(){m.splice(0,m.length),m.push(new w([document.getElementById("eleLogo")],{transform:"translate(-50%,calc(-50% - {0}px)) scale({1})",opacity:"{2}"},.8*window.innerHeight,1.3*window.innerHeight,[[0,window.innerHeight/2],[1,2],[1,0]]));var e=document.querySelectorAll("#eleCenter .eles"),t=document.getElementById("elePlay").getBoundingClientRect();document.getElementById("eleCenter").style.transform="";for(var i=0;i<e.length;i++){e[i].style.transform="";var n=e[i].getBoundingClientRect(),s={x:n.x+n.width/2,y:n.y+n.height/2-t.y};m.push(new w([e[i]],{transform:"translate({0}px,{1}px) scale({2})",opacity:"{3}"},window.innerHeight+100+200*parseInt(e[i].getAttribute("num")),1.5*window.innerHeight+100+200*parseInt(e[i].getAttribute("num")),[[window.innerWidth/2-s.x,0],[window.innerHeight/2+100-s.y,0],[.2,1],[0,1]]))}for(i=0;i<d.eles.length;i++)d.eles[i].refreshAnimation(),m.push(d.eles[i].animation);m.push(new w([document.getElementById("eleCenter")],{transform:"translate(-50%,calc(-50% + 100px)) scale({0})",opacity:"{1}"},window.innerHeight,1.5*window.innerHeight,[[0,1],[0,1]])),m.push(new w([document.getElementById("eleTitle")],{transform:"translate(-50%,calc(-50% - 300px)) scale({0})",opacity:"{1}"},window.innerHeight,1.5*window.innerHeight,[[0,1],[0,1]])),setTimeout(p,0)}function p(e){for(var t=document.getElementById("fixed").scrollTop-g,i=d.all,n=0;n<i.length;n++)i[n].scroll(t);g=document.getElementById("fixed").scrollTop;for(n=0;n<m.length;n++)m[n].change(g)}window.onresize=e=>{var t=window.innerHeight,i=window.innerWidth,s=t/h,a=i/l,c=Math.min(t,i)/Math.min(l,h),g=Math.floor(Math.max(t,i)/50);if(g<d.start.length){for(var w=g;w<d.start.length;w++)d.start[w].ele.style.opacity="0",setTimeout((e=>{e.root.remove()}),300,d.start[w]);d.start.splice(g,d.start.length-g)}else for(w=d.start.length;w<g;w++){var m=new n(h,l);document.getElementById("colorBlocks").appendChild(m.root),m.ele.style.opacity="0",setTimeout((e=>{e.ele.style.opacity="1"}),0,m),d.start.push(m)}if(g<d.eles.length){for(w=g;w<d.eles.length;w++)d.eles[w].ele.style.opacity="0",setTimeout((e=>{e.root.remove()}),300,d.eles[w]);d.eles.splice(g,d.eles.length-g)}else for(w=d.eles.length;w<g;w++){(m=new o(h,l)).ele.style.opacity="0",setTimeout((e=>{e.ele.style.opacity="1"}),0,m),d.eles.push(m)}for(var p=0;p<d.ends.length;p++){var y=d.ends[p];if(g<y.length){for(w=g;w<y.length;w++)y[w].ele.style.opacity="0",setTimeout((e=>{e.root.remove()}),300,y[w]);y.splice(g,y.length-g)}else for(w=y.length;w<g;w++){(m=new r(p,h,l)).ele.style.opacity="0",setTimeout((e=>{e.ele.style.opacity="1"}),0,m),y.push(m)}}setTimeout((()=>{for(var e=d.all,n=0;n<e.length;n++)e[n].top*=s,e[n].left*=a,e[n].size*=c,e[n].refresh();l=i,h=t,setTimeout(u(),0)}),0)},window.onload=function(){l=window.innerWidth,h=window.innerHeight,e(),setTimeout((()=>{document.getElementById("fixed").style.overflowY="scroll"}),300);for(var t=0;t<Math.max(window.innerHeight,window.innerWidth)/50;t++)d.start.push(new s);for(t=0;t<Math.max(window.innerHeight,window.innerWidth)/50;t++)d.eles.push(new o);document.getElementById("signBox").innerText=a,setTimeout(c,300,a),document.getElementById("fixed").addEventListener("scroll",p);var i=document.querySelectorAll(".elesPage .elseBG");for(t=0;t<i.length;t++){d.ends.push([]);for(var n=0;n<Math.max(window.innerHeight,window.innerWidth)/50;n++)d.ends[t].push(new r(t))}u()};
