import{_ as e,r as a,a as l,b as t,h as u,e as s,u as r,H as n,y as i,z as v,F as o,O as p,C as f,P as m,E as d,p as c,k as y,m as h}from"./all-7358aab5.js";import{m as k}from"./header-dda93fe1.js";import{i as b}from"./text-797cab90.js";import{i as g,a as x}from"./emailCode-7e47425d.js";import{i as _}from"./button-1f2a426c.js";const w={class:"main"},j=(e=>(c("data-v-9f7ee265"),e=e(),y(),e))((()=>s("h1",{class:"title"},"重置密码",-1))),I={class:"bottom-button"},$=["href"],C=["href"];h(e({__name:"App",setup(e){let c=a(""),y=a(""),h=a(""),z=a(null),A=a(null),U=a(null),Z=a(0),E=a(""),F=a(""),H=a(null),O=a(null),P=[H,O];function R(){if(0===Z.value)p(c.value).then((e=>{y.value=e.name,h.value=e.email,Z.value=1}),(e=>{f("用户不存在")}));else if(1==Z.value)A.value.check().then((()=>{Z.value=2}));else if(2==Z.value)U.value.check().then((()=>{Z.value=3}));else if(3==Z.value){for(let e of P){if(-1==e.value.wrong)return void f(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void f(e.value.reminder[e.value.wrong-1])}m(c.value,E.value)}}return(e,a)=>(l(),t(o,null,[u(k,{title:"登录",jump:"/user/"}),s("div",w,[j,0===r(Z)?(l(),n(b,{key:0,ref_key:"flagInput",ref:z,class:"input-box",type:"text",title:"用户名/邮箱",value:r(c),"onUpdate:value":a[0]||(a[0]=e=>i(c)?c.value=e.target.value:c=e.target.value)},null,8,["value"])):v("",!0),1===r(Z)?(l(),n(b,{key:1,class:"input-box",type:"text",title:"用户名",value:r(y),disabled:!0},null,8,["value"])):v("",!0),1===r(Z)?(l(),n(g,{key:2,class:"input-box",ref_key:"imageCodeInput",ref:A},null,512)):v("",!0),2===r(Z)?(l(),n(b,{key:3,class:"input-box",type:"email",title:"邮箱",value:r(h),disabled:!0},null,8,["value"])):v("",!0),2===r(Z)?(l(),n(x,{key:4,class:"input-box",ref_key:"emailCodeInput",ref:U},null,512)):v("",!0),3==r(Z)?(l(),n(b,{key:5,ref_key:"passwordInput",ref:H,class:"input-box",type:"password",title:"密码",value:r(E),"onUpdate:value":a[1]||(a[1]=e=>i(E)?E.value=e.target.value:E=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(r(O).refreshReminder(r(F),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3)},null,8,["value","tester"])):v("",!0),3==r(Z)?(l(),n(b,{key:6,ref_key:"passwordInput2",ref:O,class:"input-box",type:"password",title:"确认密码",value:r(F),disabled:!1,"onUpdate:value":a[2]||(a[2]=e=>i(F)?F.value=e.target.value:F=e.target.value),reminder:["密码不匹配"],tester:(e,a=r(E))=>e===a?0:1},null,8,["value","tester"])):v("",!0),u(_,{value:3!=r(Z)?"下一步":"确认",onClick:R},null,8,["value"]),s("div",I,[s("p",null,[s("a",{href:`/login/?from=${r(d)("from","/")}`},"登录",8,$)]),s("p",null,[s("a",{href:`/signup/?from=${r(d)("from","/")}`},"注册",8,C)])])])],64))}},[["__scopeId","data-v-9f7ee265"]])).mount("#app");
