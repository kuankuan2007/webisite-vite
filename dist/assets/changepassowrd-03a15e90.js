import{_ as e,a,O as l,o as t,b as s,d as u,e as r,u as n,q as i,v as o,j as v,F as p,s as d,P as f,p as m,f as c,i as k}from"./all-b9340eea.js";import{m as g}from"./header-795b47a1.js";import{i as h,a as y}from"./emailCode-824413c3.js";import{i as _}from"./button-8505e708.js";import{i as j}from"./text-0fe24a9a.js";const w={class:"main"},b=(e=>(m("data-v-42e22c39"),e=e(),c(),e))((()=>r("h1",{class:"title"},"修改密码",-1)));k(e({__name:"App",setup(e){let m=a(),c=a(),k=a(),$=a(),A=a(""),I=a(""),z=l("userinfo",a,sessionStorage,{},!0),C=a(0),U=[$,k];return(e,a)=>(t(),s(p,null,[u(g,{title:"用户设置",toLogin:!0,"need-info":!0}),r("div",w,[b,1!=n(C)?(t(),i(j,{key:0,class:"input-ele",value:n(z).name,disabled:!0,title:"用户"},null,8,["value"])):o("",!0),1==n(C)?(t(),i(j,{key:1,class:"input-ele",value:n(z).email,disabled:!0,title:"邮箱"},null,8,["value"])):o("",!0),0==n(C)?(t(),i(h,{key:2,class:"input-ele",ref_key:"imagecode",ref:m},null,512)):o("",!0),1==n(C)?(t(),i(y,{key:3,class:"input-ele",ref_key:"emailcode",ref:c},null,512)):o("",!0),2==n(C)?(t(),i(j,{key:4,ref_key:"passwordInput",ref:$,class:"input-ele",type:"password",title:"新密码",value:n(A),"onUpdate:value":a[0]||(a[0]=e=>v(A)?A.value=e.target.value:A=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(n(k).refreshReminder(n(I),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3)},null,8,["value","tester"])):o("",!0),2==n(C)?(t(),i(j,{key:5,ref_key:"passwordInput2",ref:k,class:"input-ele",type:"password",title:"确认密码",value:n(I),"onUpdate:value":a[1]||(a[1]=e=>v(I)?I.value=e.target.value:I=e.target.value),reminder:["密码不匹配"],tester:(e,a=n(A))=>e===a?0:1},null,8,["value","tester"])):o("",!0),u(_,{class:"input-ele",value:2===n(C)?"完成":"下一步",onClick:a[2]||(a[2]=e=>function(){if(0===C.value&&m.value.check().then((()=>{C.value=1})),1===C.value)c.value.check().then((()=>{C.value=2}));else{for(let e of U){if(-1==e.value.wrong)return void d(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void d(e.value.reminder[e.value.wrong-1])}f(A.value).then((()=>{d("密码修改成功").then((()=>{location.href="/user/"}))}))}}())},null,8,["value"])])],64))}},[["__scopeId","data-v-42e22c39"]])).mount("#app");
