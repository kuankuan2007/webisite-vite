import{_ as e,r as a,o as t,a as l,b as s,d as r,w as u,e as i,F as n,f as d,g as o,u as p,h as f,i as c,j as h,t as m,n as v,k as _,p as y,l as g,m as b,q as w}from"./all-a1f15435.js";import{m as k}from"./header-d669f84a.js";const z=e({__name:"sizeTester",emits:["resize"],setup(e,{emit:r}){let u=a();return t((()=>{u.value.contentWindow.addEventListener("resize",(()=>{r("resize")}),!1)})),(e,a)=>(l(),s("iframe",{class:"size-tester",ref_key:"sizeTester",ref:u},null,512))}},[["__scopeId","data-v-fb53e033"]]),G=e({__name:"waterfallFlow",props:{valueList:{type:Array,default:[],required:!0},eleWidth:{type:Number,default:0,required:!0},rowGap:{type:Number,default:10,required:!1},columnGap:{type:Number,default:10,required:!1},debounceDelay:{type:Number,default:300,required:!1}},setup(e){const c=e;let h=r((function(){if(null===m.value)return;const e=m.value;let a=e.children;if(0===a.length)return;const t=e.clientWidth,l=Math.min(a.length,Math.max(1,Math.floor(t/(c.eleWidth+c.columnGap))));l<=1&&(c.columnGap=0);const s=Array(l).fill(0),r=(t-l*c.eleWidth-(l-1)*c.columnGap)/2;for(let u=0;u<a.length;u++){const e=a[u];let t=1/0,l=0;for(let a=0;a<s.length;a++)s[a]<t&&(t=s[a],l=a);e.style.top=`${t}px`,e.style.left=`${r+l*(c.eleWidth+c.columnGap)}px`,s[l]+=e.clientHeight+c.rowGap}e.style.height=Math.max(...s)-c.rowGap+20+"px"}),c.debounceDelay);u((()=>{c.valueList,h()}));let m=a(null);return t((()=>{u((()=>{m.value.style.setProperty("--width",`${c.eleWidth}px`)}))})),(e,a)=>(l(),s(n,null,[i("div",{class:"watterfall",ref_key:"watterfall",ref:m},[(l(!0),s(n,null,d(p(c).valueList,((a,t)=>o(e.$slots,"default",{data:a,key:t},void 0,!0))),128))],512),f(z,{onResize:p(h)},null,8,["onResize"])],64))}},[["__scopeId","data-v-43f223b1"]]),W={class:"list"},q=(e=>(y("data-v-f3a57343"),e=e(),g(),e))((()=>i("a",{class:"add",href:"/feedback/new/"},[i("span",{class:"demo-icon"},""),b("新建")],-1))),x=["href"],L={class:"item-padding"},M={class:"time"},$={class:"user"},N=e({__name:"feedbackList",setup(e){let t=c([]),r=a(!0),u=a("");function n(){r.value=!1,u.value="加载中";let e=t.length,a=e+40;_(e,a).then((l=>{if(!r.value){if(null===l)return showMessage("无法获取更多的反馈"),void(r.value=!1);l.length<a-e+1?(r.value=!1,u.value="暂时没有更多啦"):(r.value=!0,u.value="更多"),e+=l.length,a+=l.length;for(var s=0;s<l.length;s++)t.push(l[s])}}))}return n(),(e,a)=>(l(),s("div",W,[q,f(G,{eleWidth:300,"value-list":p(t),class:"watterfall"},{default:h((({data:e})=>[i("a",{href:`/feedback/data/?id=${e.id}`,class:"item"},[i("div",L,[i("h2",null,m(e.title),1),i("p",M,m(e.time),1),i("p",$,m(e.user),1),i("p",{class:v(["statue",e.statue])},m(e.statue),3)])],8,x)])),_:1},8,["value-list"]),i("p",{class:v({disabled:!p(r),more:!0}),onClick:n},m(p(u)),3)]))}},[["__scopeId","data-v-f3a57343"]]);w({__name:"App",setup:e=>(e,a)=>(l(),s(n,null,[f(k,{title:"宽宽2007·反馈"}),f(N)],64))}).mount("#app");
