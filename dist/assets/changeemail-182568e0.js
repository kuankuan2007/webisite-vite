import{_ as e,r as a,U as l,a as s,b as t,h as u,e as i,u as n,H as r,z as o,n as v,y as c,F as d,W as m,C as p,p as f,k,m as h}from"./all-f67fe198.js";import{m as y}from"./header-1768119f.js";import{i as _,a as b}from"./emailCode-2f419474.js";import{i as g}from"./button-9ca46c9d.js";import{i as j}from"./text-9c2e9f6b.js";const w={class:"main"},C=(e=>(f("data-v-3afc1fd6"),e=e(),k(),e))((()=>i("h1",{class:"title"},"修改邮箱",-1)));h(e({__name:"App",setup(e){let f=a(),k=a(""),h=a(),I=a();a(),a();let U=l("userinfo",a,sessionStorage,{},!0),x=a(0);return(e,a)=>(s(),t(d,null,[u(y,{title:"用户设置",toLogin:!0,"need-info":!0}),i("div",w,[C,1!=n(x)?(s(),r(j,{key:0,class:"input-ele",value:n(U).name,disabled:!0,title:"用户"},null,8,["value"])):o("",!0),1==n(x)?(s(),r(j,{key:1,class:"input-ele",value:n(U).email,disabled:!0,title:"邮箱"},null,8,["value"])):o("",!0),0==n(x)?(s(),r(_,{key:2,class:"input-ele",ref_key:"imagecode",ref:f},null,512)):o("",!0),1==n(x)?(s(),r(b,{key:3,class:"input-ele",ref_key:"emailcode",ref:h},null,512)):o("",!0),2==n(x)?(s(),r(j,{key:4,ref:"emailInput",class:v(["input-ele",{disabled:n(x)>2}]),type:"email",title:"新邮箱",value:n(k),"onUpdate:value":a[0]||(a[0]=e=>c(k)?k.value=e.target.value:k=e.target.value),reminder:["邮箱格式不正确"],tester:e=>/^[\w.%+-]+@(?:[^/\\\.&\?\#]+\.)+[^/\\\.&\?\#]+$/.test(e)?0:1,disabled:n(x)>2},null,8,["class","value","tester","disabled"])):o("",!0),3==n(x)?(s(),r(b,{key:5,class:"input-ele",ref_key:"newEmailcode",ref:I,"use-new-email":!0},null,512)):o("",!0),u(g,{class:"input-ele",value:3===n(x)?"完成":"下一步",onClick:a[1]||(a[1]=e=>(0===x.value&&f.value.check().then((()=>{x.value=1})),1===x.value&&h.value.check().then((()=>{x.value=2})),2===x.value&&m(k.value).then((()=>{x.value=3})),void(3===x.value&&I.value.check().then((()=>{p("邮箱已更改",(()=>{location.href="/user/"}))})))))},null,8,["value"])])],64))}},[["__scopeId","data-v-3afc1fd6"]])).mount("#app");
