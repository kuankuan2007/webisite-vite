import{_ as e,a,B as l,o as t,b as s,d as u,e as r,u as n,x as i,n as d,j as v,v as o,F as p,s as f,C as m,D as b,m as c,p as y,f as k,i as g}from"./all-7fb1665d.js";import{m as h}from"./header-93f915ff.js";import{i as x}from"./text-c77f088d.js";import{i as _,a as w}from"./date-bb3870c7.js";import{i as j}from"./button-f6c27800.js";import{i as I,a as $}from"./emailCode-a8ea0326.js";import"./selecter-c92142e9.js";const U={class:"main"},C=(e=>(y("data-v-37ef406a"),e=e(),k(),e))((()=>r("h1",{class:"title"},"注册",-1))),z={class:"bottom-button"},D=["href"],A=["href"];g(e({__name:"App",setup(e){let y=a(""),k=a(""),g=a(""),Z=a(""),q=a(""),B=l(new Date(1970,0,1)),F=a("保密"),R=a(""),S=a(null),E=a(null),G=a(null),H=a(null),J=a(null),K=a(null),L=[S,Z,E,G,H,K],M=a(0);function N(){if(0==M.value){for(let e of L){if(-1==e.value.wrong)return void f(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void f(e.value.reminder[e.value.wrong-1])}m(y.value,R.value).then((e=>{null===e?M.value=1:f(e.msg)}))}else 1==M.value?q.value.check().then((()=>{M.value=2})):2==M.value&&J.value.check().then((()=>{b(y.value,R.value,B.value,F.value,k.value)}))}return(e,a)=>(t(),s(p,null,[u(h,{title:"注册",jump:"/user/"}),r("div",U,[C,0==n(M)||1==n(M)?(t(),i(x,{key:0,ref_key:"usernameInput",ref:S,class:d(["input-box",{disabled:0!=n(M)}]),type:"text",title:"用户名",value:n(y),"onUpdate:value":a[0]||(a[0]=e=>v(y)?y.value=e.target.value:y=e.target.value),reminder:["用户名必须是2-32个非空白字符"],tester:e=>/^\S{2,32}$/.test(e)?0:1,disabled:n(M)>0},null,8,["class","value","tester","disabled"])):o("",!0),0==n(M)||2==n(M)?(t(),i(x,{key:1,ref_key:"emailInput",ref:Z,class:d(["input-box",{disabled:0!=n(M)}]),type:"email",title:"邮箱",value:n(R),"onUpdate:value":a[1]||(a[1]=e=>v(R)?R.value=e.target.value:R=e.target.value),reminder:["邮箱格式不正确"],tester:e=>/^[\w.%+-]+@(?:[^/\\\.&\?\#]+\.)+[^/\\\.&\?\#]+$/.test(e)?0:1,disabled:n(M)>0},null,8,["class","value","tester","disabled"])):o("",!0),0==n(M)?(t(),i(x,{key:2,ref_key:"passwordInput",ref:E,class:"input-box",type:"password",title:"密码",value:n(k),"onUpdate:value":a[2]||(a[2]=e=>v(k)?k.value=e.target.value:k=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(n(G).refreshReminder(n(g),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3),disabled:n(M)>0},null,8,["value","tester","disabled"])):o("",!0),0==n(M)?(t(),i(x,{key:3,ref_key:"passwordInput2",ref:G,class:"input-box",type:"password",title:"确认密码",value:n(g),disabled:n(M)>0,"onUpdate:value":a[3]||(a[3]=e=>v(g)?g.value=e.target.value:g=e.target.value),reminder:["密码不匹配"],tester:(e,a=n(k))=>e===a?0:1},null,8,["value","disabled","tester"])):o("",!0),0==n(M)?(t(),i(_,{key:4,ref_key:"birthDateInput",ref:H,"onUpdate:date":a[4]||(a[4]=e=>v(B)?B.value=e:B=e),style:{"z-index":"1"},value:n(B),disabled:n(M)>0,class:"input-box",title:"出生日期",reminder:["出生日期应在当前日期之前"],tester:e=>e>new Date?1:0},null,8,["value","disabled","tester"])):o("",!0),0==n(M)?(t(),i(w,{key:5,ref_key:"sexInput",ref:K,"onUpdate:value":a[5]||(a[5]=e=>v(F)?F.value=e:F=e),style:{"z-index":"0"},value:n(F),class:"input-box",title:"性别",disabled:n(M)>0},null,8,["value","disabled"])):o("",!0),1==n(M)?(t(),i(I,{key:6,class:"input-box",ref_key:"imageCodeInput",ref:q},null,512)):o("",!0),2==n(M)?(t(),i($,{key:7,class:"input-box",ref_key:"emailCodeInput",ref:J},null,512)):o("",!0),u(j,{value:2!=n(M)?"下一步":"完成",onClick:N},null,8,["value"]),r("div",z,[r("p",null,[r("a",{href:`/login/reset/?from=${n(c)("from","/")}`},"忘记密码",8,D)]),r("p",null,[r("a",{href:`/login/?from=${n(c)("from","/")}`},"登录",8,A)])])])],64))}},[["__scopeId","data-v-37ef406a"]])).mount("#app");
