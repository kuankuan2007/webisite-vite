import{_ as e,a as t,a0 as a,J as s,I as l,o as n,b as i,e as o,K as r,L as d,u as c,d as u,j as m,h,v as p,F as g,N as v,w,a2 as y,n as f,t as k,a3 as S,p as E,f as x}from"./all-f2977786.js";import"./header-ace7efb4.js";import{_ as H}from"./markdownShower-af1dad78.js";const C=e=>(E("data-v-06c91370"),e=e(),x(),e),_=["value"],b={class:"buttons"},j=C((()=>o("span",{class:"demo-icon"},"",-1))),B=C((()=>o("span",{class:"demo-icon"},"",-1))),L=["onClick","innerHTML"],O={class:"content"},$={class:"names"},I=["onClick"],N={class:"title"},T=["src"],D=e({__name:"markDownEditor",props:{headerLevelStart:{type:Number,default:1,required:!1},content:{type:String,default:"",required:!0},otherButtons:{type:Array,default:[],required:!1},maxEditorHeight:{type:Number,default:1/0,required:!1}},emits:["update:content","customButtomClick"],setup(e,{expose:E,emit:x}){const C=e;let D=t(null),q={display:{horizontal:"左右",vertical:"上下",hidden:"隐藏"}},z=a(C.content,500);s((()=>{z.value=C.content}));let J=t("editer"),M={display:"horizontal"},P=JSON.parse(localStorage.getItem("markdownEditorSettings")),U=t(Object.assign({},M,P));function A(){P=JSON.parse(localStorage.getItem("markdownEditorSettings")),U.value=Object.assign({},M,P);for(let e in U.value)D.value.dataset[`markdownEditorTheme${e.slice(0,1).toUpperCase()+e.slice(1)}`]=U.value[e];K()}function F(e){K(),x("update:content",e)}function K(){G.value.style.minHeight="unset",R.value.showBox.style.minHeight="unset",D.value.style.minHeight="unset";let e=Math.min(C.maxEditorHeight,G.value.scrollHeight-20);G.value.style.minHeight=`${e}px`,R.value.showBox.style.minHeight=`${e}px`,D.value.style.minHeight=`${e+20}px`}let R=t(null),G=t(null);function Q(){V.value.close()}l((()=>{A(),window.addEventListener("localStorageSetItemEvent",(e=>{"markdownEditorSettings"===e.key&&A()})),window.addEventListener("storage",(e=>{"markdownEditorSettings"===e.key&&A()})),K(),s((()=>{D.value.style.setProperty("--max-height",C.maxEditorHeight+"px")}))}));let V=t(null);function W(e){V.value.showModal()}function X(e){return new URL(Object.assign({"../image/markDownThemeShower/display-hidden.svg":"/assets/display-hidden-3a1e156d.svg","../image/markDownThemeShower/display-horizontal.svg":"/assets/display-horizontal-99f993ff.svg","../image/markDownThemeShower/display-vertical.svg":"/assets/display-vertical-f3a1e42c.svg"})[`../image/markDownThemeShower/${e}.svg`],self.location).pathname}return E({editer:G}),(e,t)=>(n(),i(g,null,[o("div",{class:"markdownEditor",ref_key:"markdownEditor",ref:D},[r(o("textarea",{ref_key:"editer",ref:G,class:"editor",value:c(C).content,onInput:F},null,40,_),[[d,"hidden"!==c(U).display||"editer"===c(J)]]),r(u(H,{ref_key:"shower",ref:R,class:"shower",content:c(z),"header-level-start":c(C).headerLevelStart},null,8,["content","header-level-start"]),[[d,"hidden"!==c(U).display||"shower"===c(J)]]),o("div",b,["hidden"===c(U).display?r((n(),i("p",{key:0,onClick:t[0]||(t[0]=e=>m(J)?J.value="shower":J="shower"),class:"showShowerButton"},[h("预览"),j],512)),[[d,"editer"===c(J)]]):p("",!0),"hidden"===c(U).display?r((n(),i("p",{key:1,onClick:t[1]||(t[1]=e=>m(J)?J.value="editer":J="editer"),class:"showEditerButton"},[h("编辑"),B],512)),[[d,"shower"===c(J)]]):p("",!0),o("p",{class:"demo-icon setting",onClick:W},""),(n(!0),i(g,null,v(c(C).otherButtons,(e=>(n(),i("p",{onClick:t=>{return a=e.event,void x("customButtomClick",a);var a},innerHTML:e.inner},null,8,L)))),256))])],512),u(S,{class:"setting-dialog",ref_key:"settingDialog",ref:V},{default:w((()=>[o("div",O,[o("ul",$,[(n(!0),i(g,null,v(c(q),((e,t)=>(n(),i("li",null,[o("ul",{class:"values",style:y(`grid-template-columns: repeat(${Object.getOwnPropertyNames(e).length},minmax(0px,1fr));`)},[(n(!0),i(g,null,v(e,((e,a)=>(n(),i("li",{class:f({choice:a===c(U)[t]}),onClick:e=>function(e,t){U.value[e]=t,localStorage.setItem("markdownEditorSettings",JSON.stringify(U.value))}(t,a)},[o("p",N,k(e),1),o("img",{src:X(`${t}-${a}`)},null,8,T)],10,I)))),256))],4)])))),256))])]),o("p",{class:"close demo-icon",onClick:Q},"")])),_:1},512)],64))}},[["__scopeId","data-v-06c91370"]]);export{D as m};
