import{_ as e,r as t,o as l,J as a,a as r,b as u,e as s,t as n,u as i,h as d,w as o,T as v,n as p,q as c,v as f,l as m,p as g,k as h,H as y,K as b,A as _,L as w,M as k,N as x,O as S,E as I,s as q,x as A,F as $,P as U,Q as C,C as D,m as F}from"./all-44010498.js";import{m as M}from"./header-9ab5142f.js";import{i as j,a as z}from"./button-01c4e78c.js";import{m as Y}from"./selecter-9be3ad4a.js";const B={class:"input-group"},G={class:"reminder"},P=(e=>(g("data-v-c847c075"),e=e(),h(),e))((()=>s("span",{class:"demo-icon"},"",-1))),R=e({__name:"sex",props:{title:{type:String,required:!1,default:"日期"},value:{type:String,required:!0,default:"保密"},tester:{type:Function,default:()=>0,required:!1},reminder:{type:Array,default:["内容格式不正确"],required:!1},disabled:{type:Boolean,required:!1,default:!1}},emits:["update:value"],setup(e,{expose:g,emit:h}){const y=e;let b=t(0);function _(e,...t){b.value=y.tester(e,...t)}let w=t(null),k=t(null);return l((()=>{a((()=>{y.title,w.value.style.setProperty("--title-width",`${k.value.clientWidth}px`)}))})),g({wrong:b,reminder:y.reminder,title:y.title,refreshReminder:_}),(e,t)=>(r(),u("div",{class:p(["main-box",{disabled:i(y).disabled}]),ref_key:"inputGroup",ref:w},[s("div",B,[s("p",{class:"title",ref_key:"title",ref:k},n(i(y).title),513),d(Y,{"onUpdate:choice":t[0]||(t[0]=e=>{return _(t=e),void h("update:value",t);var t}),class:"selecter",values:["保密","男","女","其他"],choice:i(y).value},null,8,["choice"])]),d(v,{name:"reminder"},{default:o((()=>[c(s("p",G,[P,m(n(i(y).reminder[i(b)-1]),1)],512),[[f,0!=i(b)]])])),_:1})],2))}},[["__scopeId","data-v-c847c075"]]),T=e=>(g("data-v-27a23105"),e=e(),h(),e),W={class:"input-group"},Z=T((()=>s("p",null,"年",-1))),E=T((()=>s("p",null,"月",-1))),H=T((()=>s("p",null,"日",-1))),J={class:"reminder"},K=T((()=>s("span",{class:"demo-icon"},"",-1))),L=e({__name:"date",props:{title:{type:String,required:!1,default:"日期"},value:{type:Date,required:!0,default:new Date(2e3,1,1)},tester:{type:Function,default:()=>0,required:!1},reminder:{type:Array,default:["内容格式不正确"],required:!1},disabled:{type:Boolean,required:!1,default:!1}},emits:["update:date"],setup(e,{expose:g,emit:h}){const b=e;let _=t(0);function w(e,...t){_.value=b.tester(e,...t)}function k(e,t){let l=new Date(b.value);"year"===e&&l.setFullYear(parseInt(t,10)),"mounth"===e&&l.setMonth(parseInt(t,10)-1),"date"===e&&l.setDate(parseInt(t,10)),w(l),h("update:date",l)}let x=t(null),S=t(null);l((()=>{a((()=>{b.title,x.value.style.setProperty("--title-width",`${S.value.clientWidth}px`)}))}));let I=y((()=>{let e=b.value.getMonth()+1;return 2==e?b.value.getFullYear()%4==0&&b.value.getFullYear()%100!=0||b.value.getFullYear()%400==0?Array.from({length:29},((e,t)=>(t+1).toString())):Array.from({length:28},((e,t)=>(t+1).toString())):e<=7?e%2==0?Array.from({length:30},((e,t)=>(t+1).toString())):Array.from({length:31},((e,t)=>(t+1).toString())):e%2==0?Array.from({length:31},((e,t)=>(t+1).toString())):Array.from({length:30},((e,t)=>(t+1).toString()))}));return g({wrong:_,reminder:b.reminder,title:b.title,refreshReminder:w}),(e,t)=>(r(),u("div",{class:p(["main-box",{disabled:i(b).disabled}]),ref_key:"inputGroup",ref:x},[s("div",W,[s("p",{class:"title",ref_key:"title",ref:S},n(i(b).title),513),d(Y,{"onUpdate:choice":t[0]||(t[0]=e=>k("year",e)),class:"selecter",values:Array.from({length:200},((e,t)=>(t+1900).toString())),choice:i(b).value.getFullYear().toString()},null,8,["values","choice"]),Z,d(Y,{"onUpdate:choice":t[1]||(t[1]=e=>k("mounth",e)),class:"selecter",values:Array.from({length:12},((e,t)=>(t+1).toString())),choice:(i(b).value.getMonth()+1).toString()},null,8,["values","choice"]),E,d(Y,{"onUpdate:choice":t[2]||(t[2]=e=>k("date",e)),class:"selecter",values:i(I),choice:i(b).value.getDate().toString()},null,8,["values","choice"]),H]),d(v,{name:"reminder"},{default:o((()=>[c(s("p",J,[K,m(n(i(b).reminder[i(_)-1]),1)],512),[[f,0!=i(_)]])])),_:1})],2))}},[["__scopeId","data-v-27a23105"]]),N={class:"input-group",ref:"inputGroup"},O={class:"code-box"},Q={class:"code-click"},V=["src"],X=[(e=>(g("data-v-b032d12d"),e=e(),h(),e))((()=>s("p",null,"点击刷新",-1)))],ee=e({__name:"imageCode",props:{title:{type:String,default:"验证码",required:!1},disabled:{type:Boolean,required:!1,default:!1}},setup(e,{expose:l}){const a=e;let n=t(""),o=t(""),v=t(null);function p(){b().then((e=>{o.value=e}),(e=>{}))}function c(e){n.value=e.target.value}return p(),l({check:async function(){if(-1==v.value.wrong)throw void _("请填写图片验证码");if(0!=v.value.wrong)throw void _(v.value.reminder[v.value.wrong-1]);if(!(await w(n.value)))throw void 0},refresh:p}),(e,t)=>(r(),u("div",N,[d(j,{value:i(n),"onUpdate:value":c,title:i(a).title,reminder:["图片验证码应是四位字母/数字"],tester:e=>/^[a-z0-9]{4}$/.test(e)?0:1,ref_key:"inputer",ref:v},null,8,["value","title","tester"]),s("div",O,[s("div",Q,[s("img",{class:"img",src:i(o)},null,8,V),s("div",{class:"refresh",onClick:p},X)])])],512))}},[["__scopeId","data-v-b032d12d"]]),te={class:"input-group",ref:"inputGroup"},le={class:"code-box"},ae={class:"code-click"},re=e({__name:"emailCode",props:{title:{type:String,default:"验证码",required:!1},disabled:{type:Boolean,required:!1,default:!1}},setup(e,{expose:l}){const a=e;let o=t(""),v=t(0),c=t(null);function f(e){e<0?v.value=0:(v.value=e,setTimeout(f,1e3,e-1))}function m(){k().then((()=>{f(60)}),(e=>{}))}function g(e){o.value=e.target.value}return m(),l({check:async function(){if(-1==c.value.wrong)throw void showMessage("请填写邮箱验证码");if(0!=c.value.wrong)throw void showMessage(c.value.reminder[c.value.wrong-1]);if(!(await x(o.value)))throw void 0},refresh:m}),(e,t)=>(r(),u("div",te,[d(j,{value:i(o),"onUpdate:value":g,title:i(a).title,reminder:["图片验证码应是6位数字"],tester:e=>/^[0-9]{6}$/.test(e)?0:1,ref_key:"inputer",ref:c},null,8,["value","title","tester"]),s("div",le,[s("div",ae,[s("div",{class:p(["refresh",{disabled:i(v)>0}]),onClick:m},[s("p",null,n(i(v)>0?`${i(v)}s`:"重新发送"),1)],2)])])],512))}},[["__scopeId","data-v-e0da4650"]]),ue={class:"main"},se=(e=>(g("data-v-37ef406a"),e=e(),h(),e))((()=>s("h1",{class:"title"},"注册",-1))),ne={class:"bottom-button"},ie=["href"],de=["href"];F(e({__name:"App",setup(e){let l=t(""),a=t(""),n=t(""),o=t(""),v=t(""),c=S(new Date(1970,0,1)),f=t("保密"),m=t(""),g=t(null),h=t(null),y=t(null),b=t(null),w=t(null),k=t(null),x=[g,o,h,y,b,k],F=t(0);function Y(){if(0==F.value){for(let e of x){if(-1==e.value.wrong)return void _(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void _(e.value.reminder[e.value.wrong-1])}U(l.value,m.value).then((e=>{null===e?F.value=1:_(e.msg)}))}else 1==F.value?v.value.check().then((()=>{F.value=2})):2==F.value&&w.value.check().then((()=>{C(l.value,m.value,c.value,f.value,a.value)}))}return(e,t)=>(r(),u($,null,[d(M,{title:"注册",jump:"/user/"}),s("div",ue,[se,0==i(F)||1==i(F)?(r(),I(j,{key:0,ref_key:"usernameInput",ref:g,class:p(["input-box",{disabled:0!=i(F)}]),type:"text",title:"用户名",value:i(l),"onUpdate:value":t[0]||(t[0]=e=>q(l)?l.value=e.target.value:l=e.target.value),reminder:["用户名必须是2-32个非空白字符"],tester:e=>/^\S{2,32}$/.test(e)?0:1,disabled:i(F)>0},null,8,["class","value","tester","disabled"])):A("",!0),0==i(F)||2==i(F)?(r(),I(j,{key:1,ref_key:"emailInput",ref:o,class:p(["input-box",{disabled:0!=i(F)}]),type:"email",title:"邮箱",value:i(m),"onUpdate:value":t[1]||(t[1]=e=>q(m)?m.value=e.target.value:m=e.target.value),reminder:["邮箱格式不正确"],tester:e=>/^[\w.%+-]+@(?:[^/\\\.&\?\#]+\.)+[^/\\\.&\?\#]+$/.test(e)?0:1,disabled:i(F)>0},null,8,["class","value","tester","disabled"])):A("",!0),0==i(F)?(r(),I(j,{key:2,ref_key:"passwordInput",ref:h,class:"input-box",type:"password",title:"密码",value:i(a),"onUpdate:value":t[2]||(t[2]=e=>q(a)?a.value=e.target.value:a=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(i(y).refreshReminder(i(n),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3),disabled:i(F)>0},null,8,["value","tester","disabled"])):A("",!0),0==i(F)?(r(),I(j,{key:3,ref_key:"passwordInput2",ref:y,class:"input-box",type:"password",title:"确认密码",value:i(n),disabled:i(F)>0,"onUpdate:value":t[3]||(t[3]=e=>q(n)?n.value=e.target.value:n=e.target.value),reminder:["密码不匹配"],tester:(e,t=i(a))=>e===t?0:1},null,8,["value","disabled","tester"])):A("",!0),0==i(F)?(r(),I(L,{key:4,ref_key:"birthDateInput",ref:b,"onUpdate:date":t[4]||(t[4]=e=>q(c)?c.value=e:c=e),style:{"z-index":"1"},value:i(c),disabled:i(F)>0,class:"input-box",title:"出生日期",reminder:["出生日期应在当前日期之前"],tester:e=>e>new Date?1:0},null,8,["value","disabled","tester"])):A("",!0),0==i(F)?(r(),I(R,{key:5,ref_key:"sexInput",ref:k,"onUpdate:value":t[5]||(t[5]=e=>q(f)?f.value=e:f=e),style:{"z-index":"0"},value:i(f),class:"input-box",title:"性别",disabled:i(F)>0},null,8,["value","disabled"])):A("",!0),1==i(F)?(r(),I(ee,{key:6,class:"input-box",ref_key:"imageCodeInput",ref:v},null,512)):A("",!0),2==i(F)?(r(),I(re,{key:7,class:"input-box",ref_key:"emailCodeInput",ref:w},null,512)):A("",!0),d(z,{value:2!=i(F)?"下一步":"完成",onClick:Y},null,8,["value"]),s("div",ne,[s("p",null,[s("a",{href:`/login/reset/?from=${i(D)("from","/")}`},"忘记密码",8,ie)]),s("p",null,[s("a",{href:`/login/?from=${i(D)("from","/")}`},"登录",8,de)])])])],64))}},[["__scopeId","data-v-37ef406a"]])).mount("#app");
