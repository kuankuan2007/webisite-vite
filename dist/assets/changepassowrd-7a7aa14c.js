import{_ as e,r as a,U as l,a as t,b as s,h as u,e as r,u as n,H as i,z as o,y as v,F as p,C as d,V as f,p as c,l as m,q as g}from"./all-a1f15435.js";import{m as h}from"./header-d669f84a.js";import{i as k,a as y}from"./emailCode-85e6afa5.js";import{i as _}from"./button-20f57242.js";import{i as w}from"./text-e090861d.js";const j={class:"main"},b=(e=>(c("data-v-42e22c39"),e=e(),m(),e))((()=>r("h1",{class:"title"},"修改密码",-1)));g(e({__name:"App",setup(e){let c=a(),m=a(),g=a(),$=a(),z=a(""),A=a(""),C=l("userinfo",a,sessionStorage,{},!0),I=a(0),U=[$,g];return(e,a)=>(t(),s(p,null,[u(h,{title:"用户设置",toLogin:!0,"need-info":!0}),r("div",j,[b,1!=n(I)?(t(),i(w,{key:0,class:"input-ele",value:n(C).name,disabled:!0,title:"用户"},null,8,["value"])):o("",!0),1==n(I)?(t(),i(w,{key:1,class:"input-ele",value:n(C).email,disabled:!0,title:"邮箱"},null,8,["value"])):o("",!0),0==n(I)?(t(),i(k,{key:2,class:"input-ele",ref_key:"imagecode",ref:c},null,512)):o("",!0),1==n(I)?(t(),i(y,{key:3,class:"input-ele",ref_key:"emailcode",ref:m},null,512)):o("",!0),2==n(I)?(t(),i(w,{key:4,ref_key:"passwordInput",ref:$,class:"input-ele",type:"password",title:"新密码",value:n(z),"onUpdate:value":a[0]||(a[0]=e=>v(z)?z.value=e.target.value:z=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(n(g).refreshReminder(n(A),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3)},null,8,["value","tester"])):o("",!0),2==n(I)?(t(),i(w,{key:5,ref_key:"passwordInput2",ref:g,class:"input-ele",type:"password",title:"确认密码",value:n(A),"onUpdate:value":a[1]||(a[1]=e=>v(A)?A.value=e.target.value:A=e.target.value),reminder:["密码不匹配"],tester:(e,a=n(z))=>e===a?0:1},null,8,["value","tester"])):o("",!0),u(_,{class:"input-ele",value:2===n(I)?"完成":"下一步",onClick:a[2]||(a[2]=e=>function(){if(0===I.value&&c.value.check().then((()=>{I.value=1})),1===I.value)m.value.check().then((()=>{I.value=2}));else{for(let e of U){if(-1==e.value.wrong)return void d(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void d(e.value.reminder[e.value.wrong-1])}f(z.value).then((()=>{d("密码修改成功").then((()=>{location.href="/user/"}))}))}}())},null,8,["value"])])],64))}},[["__scopeId","data-v-42e22c39"]])).mount("#app");
