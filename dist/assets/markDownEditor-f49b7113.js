import{_ as e,a as t,a6 as a,M as s,L as l,o as n,b as i,e as o,N as r,O as d,u as c,d as u,j as m,h,v as p,F as g,Q as v,w,a4 as y,n as f,t as k,a7 as S,p as E,f as x}from"./all-7fb1665d.js";import"./header-93f915ff.js";import{_ as H}from"./markdownShower-23abf85c.js";const C=e=>(E("data-v-37dec109"),e=e(),x(),e),_=["placeholder","value"],O={class:"buttons"},b=C((()=>o("span",{class:"demo-icon"},"",-1))),j=C((()=>o("span",{class:"demo-icon"},"",-1))),B=["onClick","innerHTML"],L={class:"content"},$={class:"names"},N=["onClick"],T={class:"title"},D=["src"],I=e({__name:"markDownEditor",props:{headerLevelStart:{type:Number,default:1,required:!1},content:{type:String,default:"",required:!0},otherButtons:{type:Array,default:[],required:!1},maxEditorHeight:{type:Number,default:1/0,required:!1},placeHolder:{type:String,default:"",required:!1}},emits:["update:content","customButtomClick","spicalEnter"],setup(e,{expose:E,emit:x}){const C=e;function I(e){"Enter"===e.key&&x("spicalEnter",e)}let q=t(null),M={display:{horizontal:"左右",vertical:"上下",hidden:"隐藏"}},z=a(C.content,500);s((()=>{z.value=C.content}));let J=t("editer"),P={display:"horizontal"},U=JSON.parse(localStorage.getItem("markdownEditorSettings")),A=t(Object.assign({},P,U));function F(){U=JSON.parse(localStorage.getItem("markdownEditorSettings")),A.value=Object.assign({},P,U);for(let e in A.value)q.value.dataset[`markdownEditorTheme${e.slice(0,1).toUpperCase()+e.slice(1)}`]=A.value[e];Q()}function K(e){Q(),x("update:content",e)}function Q(){G.value.style.minHeight="unset",R.value.showBox.style.minHeight="unset",q.value.style.minHeight="unset";let e=Math.min(C.maxEditorHeight,G.value.scrollHeight-20);G.value.style.minHeight=`${e}px`,R.value.showBox.style.minHeight=`${e}px`,q.value.style.minHeight=`${e+20}px`}let R=t(null),G=t(null);function V(){W.value.close()}l((()=>{F(),window.addEventListener("localStorageSetItemEvent",(e=>{"markdownEditorSettings"===e.key&&F()})),window.addEventListener("storage",(e=>{"markdownEditorSettings"===e.key&&F()})),Q(),s((()=>{q.value.style.setProperty("--max-height",C.maxEditorHeight+"px")}))}));let W=t(null);function X(e){W.value.showModal()}function Y(e){return new URL(Object.assign({"../image/markDownThemeShower/display-hidden.svg":"/assets/display-hidden-3a1e156d.svg","../image/markDownThemeShower/display-horizontal.svg":"/assets/display-horizontal-99f993ff.svg","../image/markDownThemeShower/display-vertical.svg":"/assets/display-vertical-f3a1e42c.svg"})[`../image/markDownThemeShower/${e}.svg`],self.location).pathname}return E({editer:G}),(e,t)=>(n(),i(g,null,[o("div",{class:"markdownEditor",ref_key:"markdownEditor",ref:q},[r(o("textarea",{onKeydown:I,placeholder:c(C).placeHolder,ref_key:"editer",ref:G,class:"editor",value:c(C).content,onInput:K},null,40,_),[[d,"hidden"!==c(A).display||"editer"===c(J)]]),r(u(H,{ref_key:"shower",ref:R,class:"shower",content:c(z),"header-level-start":c(C).headerLevelStart},null,8,["content","header-level-start"]),[[d,"hidden"!==c(A).display||"shower"===c(J)]]),o("div",O,["hidden"===c(A).display?r((n(),i("p",{key:0,onClick:t[0]||(t[0]=e=>m(J)?J.value="shower":J="shower"),class:"showShowerButton"},[h("预览"),b],512)),[[d,"editer"===c(J)]]):p("",!0),"hidden"===c(A).display?r((n(),i("p",{key:1,onClick:t[1]||(t[1]=e=>m(J)?J.value="editer":J="editer"),class:"showEditerButton"},[h("编辑"),j],512)),[[d,"shower"===c(J)]]):p("",!0),o("p",{class:"demo-icon setting",onClick:X},""),(n(!0),i(g,null,v(c(C).otherButtons,(e=>(n(),i("p",{onClick:t=>{return a=e.event,void x("customButtomClick",a);var a},innerHTML:e.inner},null,8,B)))),256))])],512),u(S,{class:"setting-dialog",ref_key:"settingDialog",ref:W},{default:w((()=>[o("div",L,[o("ul",$,[(n(!0),i(g,null,v(c(M),((e,t)=>(n(),i("li",null,[o("ul",{class:"values",style:y(`grid-template-columns: repeat(${Object.getOwnPropertyNames(e).length},minmax(0px,1fr));`)},[(n(!0),i(g,null,v(e,((e,a)=>(n(),i("li",{class:f({choice:a===c(A)[t]}),onClick:e=>function(e,t){A.value[e]=t,localStorage.setItem("markdownEditorSettings",JSON.stringify(A.value))}(t,a)},[o("p",T,k(e),1),o("img",{src:Y(`${t}-${a}`)},null,8,D)],10,N)))),256))],4)])))),256))])]),o("p",{class:"close demo-icon",onClick:V},"")])),_:1},512)],64))}},[["__scopeId","data-v-37dec109"]]);export{I as m};
