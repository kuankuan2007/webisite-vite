import{_ as e,r as t,o as a,a as l,b as s,e as n,q as o,v as i,u as r,h as d,s as u,l as c,x as v,w as m,y as p,F as h,i as g,z as w,n as f,t as y,p as k,k as S,A as _,B as b,m as E}from"./all-a4169b37.js";import{m as x}from"./header-9e49871e.js";import{_ as $}from"./markdownShower-0127bdb9.js";import{i as I,a as j}from"./button-8df87101.js";const C=e=>(k("data-v-bdb2d57a"),e=e(),S(),e),L=["value"],O={class:"buttons"},H=C((()=>n("span",{class:"demo-icon"},"",-1))),D=C((()=>n("span",{class:"demo-icon"},"",-1))),z={class:"content"},B={class:"names"},N=["onClick"],T={class:"title"},U=["src"],q=e({__name:"markDownEditor",props:{headerLevelStart:{type:Number,default:1,required:!1},content:{type:String,default:"",required:!0}},emits:["update:content"],setup(e,{expose:k,emit:S}){const _=e;let b=t(null),E={display:{horizontal:"左右",vertical:"上下",hidden:"隐藏"}},x=t("editer"),I={display:"horizontal"},j=JSON.parse(localStorage.getItem("markdownEditorSettings")),C=t(Object.assign({},I,j));function q(){j=JSON.parse(localStorage.getItem("markdownEditorSettings")),C.value=Object.assign({},I,j);for(let e in C.value)b.value.dataset[`markdownEditorTheme${e.slice(0,1).toUpperCase()+e.slice(1)}`]=C.value[e];A()}function J(e){A(),S("update:content",e)}function A(){M.value.style.minHeight="unset",F.value.showBox.style.minHeight="unset",b.value.style.minHeight="unset";let e=M.value.scrollHeight-20;M.value.style.minHeight=`${e}px`,F.value.showBox.style.minHeight=`${e}px`,b.value.style.minHeight=`${e+20}px`}let F=t(null),M=t(null);function P(){R.value.close()}a((()=>{q(),window.addEventListener("localStorageSetItemEvent",(e=>{"markdownEditorSettings"===e.key&&q()})),window.addEventListener("storage",(e=>{"markdownEditorSettings"===e.key&&q()})),A()}));let R=t(null);function G(e){R.value.showModal()}function K(e){return new URL(Object.assign({"../image/markDownThemeShower/display-hidden.svg":"/assets/display-hidden-3a1e156d.svg","../image/markDownThemeShower/display-horizontal.svg":"/assets/display-horizontal-99f993ff.svg","../image/markDownThemeShower/display-vertical.svg":"/assets/display-vertical-f3a1e42c.svg"})[`../image/markDownThemeShower/${e}.svg`],self.location).pathname}return k({editer:M}),(e,t)=>(l(),s(h,null,[n("div",{class:"markdownEditor",ref_key:"markdownEditor",ref:b},[o(n("textarea",{ref_key:"editer",ref:M,class:"editor",value:r(_).content,onInput:J},null,40,L),[[i,"hidden"!==r(C).display||"editer"===r(x)]]),o(d($,{ref_key:"shower",ref:F,class:"shower",content:r(_).content,"header-level-start":r(_).headerLevelStart},null,8,["content","header-level-start"]),[[i,"hidden"!==r(C).display||"shower"===r(x)]]),n("div",O,["hidden"===r(C).display?o((l(),s("p",{key:0,onClick:t[0]||(t[0]=e=>u(x)?x.value="shower":x="shower"),class:"showShowerButton"},[H,c("预览")],512)),[[i,"editer"===r(x)]]):v("",!0),"hidden"===r(C).display?o((l(),s("p",{key:1,onClick:t[1]||(t[1]=e=>u(x)?x.value="editer":x="editer"),class:"showEditerButton"},[D,c("编辑")],512)),[[i,"shower"===r(x)]]):v("",!0),n("p",{class:"demo-icon setting",onClick:G},"")])],512),d(p,{class:"setting-dialog",ref_key:"settingDialog",ref:R},{default:m((()=>[n("div",z,[n("ul",B,[(l(!0),s(h,null,g(r(E),((e,t)=>(l(),s("li",null,[n("ul",{class:"values",style:w(`grid-template-columns: repeat(${Object.getOwnPropertyNames(e).length},minmax(0px,1fr));`)},[(l(!0),s(h,null,g(e,((e,a)=>(l(),s("li",{class:f({choice:a===r(C)[t]}),onClick:e=>function(e,t){C.value[e]=t,localStorage.setItem("markdownEditorSettings",JSON.stringify(C.value))}(t,a)},[n("p",T,y(e),1),n("img",{src:K(`${t}-${a}`)},null,8,U)],10,N)))),256))],4)])))),256))])]),n("p",{class:"close demo-icon",onClick:P},"")])),_:1},512)],64))}},[["__scopeId","data-v-bdb2d57a"]]),J=e=>(k("data-v-837eb6e1"),e=e(),S(),e),A={class:"main"},F=J((()=>n("h2",null,"内容",-1))),M=J((()=>n("h2",null,"复现步骤",-1)));E(e({__name:"App",setup(e){let a=t(""),o=t(""),i=t(""),c=t(""),v=t("");function m(){/^ *$/.test(i.value)?_("标题为必填项",(()=>{c.value.input.focus()})):/^[ \n\r]*$/.test(a.value)?_("内容为必填项",(()=>{v.value.editer.focus()})):b(i.value,a.value,o.value)}return(e,t)=>(l(),s(h,null,[d(x,{title:"宽宽2007·提交反馈",toLogin:!0}),n("div",A,[d(I,{ref_key:"titleInput",ref:c,value:r(i),title:"标题","onUpdate:value":t[0]||(t[0]=e=>u(i)?i.value=e.target.value:i=e.target.value)},null,8,["value"]),F,d(q,{ref_key:"contentInput",ref:v,"onUpdate:content":t[1]||(t[1]=e=>u(a)?a.value=e.target.value:a=e.target.value),content:r(a),headerLevelStart:3},null,8,["content"]),M,d(q,{"onUpdate:content":t[2]||(t[2]=e=>u(o)?o.value=e.target.value:o=e.target.value),content:r(o),headerLevelStart:3},null,8,["content"]),d(j,{value:"提交",onClick:m})])],64))}},[["__scopeId","data-v-837eb6e1"]])).mount("#app");
