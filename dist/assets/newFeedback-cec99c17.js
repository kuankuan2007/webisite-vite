import{_ as e,r as t,q as a,s as l,o as s,a as n,b as o,e as i,v as r,x as d,u,h as c,y as v,l as m,z as p,w as h,A as g,F as f,i as w,B as y,n as k,t as S,p as _,k as E,C as b,D as x,m as $}from"./all-7358aab5.js";import{m as j}from"./header-dda93fe1.js";import{_ as C}from"./markdownShower-614bf7d2.js";import{i as I}from"./text-797cab90.js";import{i as L}from"./button-1f2a426c.js";const O=e=>(_("data-v-ecaa0938"),e=e(),E(),e),D=["value"],H={class:"buttons"},z=O((()=>i("span",{class:"demo-icon"},"",-1))),B=O((()=>i("span",{class:"demo-icon"},"",-1))),N={class:"content"},T={class:"names"},U=["onClick"],q={class:"title"},J=["src"],A=e({__name:"markDownEditor",props:{headerLevelStart:{type:Number,default:1,required:!1},content:{type:String,default:"",required:!0}},emits:["update:content"],setup(e,{expose:_,emit:E}){const b=e;let x=t(null),$={display:{horizontal:"左右",vertical:"上下",hidden:"隐藏"}},j=a(b.content,500);l((()=>{j.value=b.content}));let I=t("editer"),L={display:"horizontal"},O=JSON.parse(localStorage.getItem("markdownEditorSettings")),A=t(Object.assign({},L,O));function F(){O=JSON.parse(localStorage.getItem("markdownEditorSettings")),A.value=Object.assign({},L,O);for(let e in A.value)x.value.dataset[`markdownEditorTheme${e.slice(0,1).toUpperCase()+e.slice(1)}`]=A.value[e];P()}function M(e){P(),E("update:content",e)}function P(){G.value.style.minHeight="unset",R.value.showBox.style.minHeight="unset",x.value.style.minHeight="unset";let e=G.value.scrollHeight-20;G.value.style.minHeight=`${e}px`,R.value.showBox.style.minHeight=`${e}px`,x.value.style.minHeight=`${e+20}px`}let R=t(null),G=t(null);function K(){Q.value.close()}s((()=>{F(),window.addEventListener("localStorageSetItemEvent",(e=>{"markdownEditorSettings"===e.key&&F()})),window.addEventListener("storage",(e=>{"markdownEditorSettings"===e.key&&F()})),P()}));let Q=t(null);function V(e){Q.value.showModal()}function W(e){return new URL(Object.assign({"../image/markDownThemeShower/display-hidden.svg":"/assets/display-hidden-3a1e156d.svg","../image/markDownThemeShower/display-horizontal.svg":"/assets/display-horizontal-99f993ff.svg","../image/markDownThemeShower/display-vertical.svg":"/assets/display-vertical-f3a1e42c.svg"})[`../image/markDownThemeShower/${e}.svg`],self.location).pathname}return _({editer:G}),(e,t)=>(n(),o(f,null,[i("div",{class:"markdownEditor",ref_key:"markdownEditor",ref:x},[r(i("textarea",{ref_key:"editer",ref:G,class:"editor",value:u(b).content,onInput:M},null,40,D),[[d,"hidden"!==u(A).display||"editer"===u(I)]]),r(c(C,{ref_key:"shower",ref:R,class:"shower",content:u(j),"header-level-start":u(b).headerLevelStart},null,8,["content","header-level-start"]),[[d,"hidden"!==u(A).display||"shower"===u(I)]]),i("div",H,["hidden"===u(A).display?r((n(),o("p",{key:0,onClick:t[0]||(t[0]=e=>v(I)?I.value="shower":I="shower"),class:"showShowerButton"},[z,m("预览")],512)),[[d,"editer"===u(I)]]):p("",!0),"hidden"===u(A).display?r((n(),o("p",{key:1,onClick:t[1]||(t[1]=e=>v(I)?I.value="editer":I="editer"),class:"showEditerButton"},[B,m("编辑")],512)),[[d,"shower"===u(I)]]):p("",!0),i("p",{class:"demo-icon setting",onClick:V},"")])],512),c(g,{class:"setting-dialog",ref_key:"settingDialog",ref:Q},{default:h((()=>[i("div",N,[i("ul",T,[(n(!0),o(f,null,w(u($),((e,t)=>(n(),o("li",null,[i("ul",{class:"values",style:y(`grid-template-columns: repeat(${Object.getOwnPropertyNames(e).length},minmax(0px,1fr));`)},[(n(!0),o(f,null,w(e,((e,a)=>(n(),o("li",{class:k({choice:a===u(A)[t]}),onClick:e=>function(e,t){A.value[e]=t,localStorage.setItem("markdownEditorSettings",JSON.stringify(A.value))}(t,a)},[i("p",q,S(e),1),i("img",{src:W(`${t}-${a}`)},null,8,J)],10,U)))),256))],4)])))),256))])]),i("p",{class:"close demo-icon",onClick:K},"")])),_:1},512)],64))}},[["__scopeId","data-v-ecaa0938"]]),F=e=>(_("data-v-837eb6e1"),e=e(),E(),e),M={class:"main"},P=F((()=>i("h2",null,"内容",-1))),R=F((()=>i("h2",null,"复现步骤",-1)));$(e({__name:"App",setup(e){let a=t(""),l=t(""),s=t(""),r=t(""),d=t("");function m(){/^ *$/.test(s.value)?b("标题为必填项",(()=>{r.value.input.focus()})):/^[ \n\r]*$/.test(a.value)?b("内容为必填项",(()=>{d.value.editer.focus()})):x(s.value,a.value,l.value)}return(e,t)=>(n(),o(f,null,[c(j,{title:"宽宽2007·提交反馈",toLogin:!0}),i("div",M,[c(I,{ref_key:"titleInput",ref:r,value:u(s),title:"标题","onUpdate:value":t[0]||(t[0]=e=>v(s)?s.value=e.target.value:s=e.target.value)},null,8,["value"]),P,c(A,{ref_key:"contentInput",ref:d,"onUpdate:content":t[1]||(t[1]=e=>v(a)?a.value=e.target.value:a=e.target.value),content:u(a),headerLevelStart:3},null,8,["content"]),R,c(A,{"onUpdate:content":t[2]||(t[2]=e=>v(l)?l.value=e.target.value:l=e.target.value),content:u(l),headerLevelStart:3},null,8,["content"]),c(L,{value:"提交",onClick:m})])],64))}},[["__scopeId","data-v-837eb6e1"]])).mount("#app");
