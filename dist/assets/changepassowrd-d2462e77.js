import{_ as e,r as a,V as l,a as t,b as s,h as u,e as r,u as n,H as i,z as o,y as v,F as p,C as d,W as m,m as f}from"./all-7358aab5.js";import{m as c}from"./header-dda93fe1.js";import{i as h,a as k}from"./emailCode-7e47425d.js";import{i as y}from"./button-1f2a426c.js";import{i as g}from"./text-797cab90.js";const _={class:"main"};f(e({__name:"App",setup(e){let f=a(),w=a(),b=a(),j=a(),$=a(""),z=a(""),A=l("userinfo",a,sessionStorage,{},!0),C=a(0),I=[j,b];return(e,a)=>(t(),s(p,null,[u(c,{title:"用户设置",toLogin:!0,"need-info":!0}),r("div",_,[1!=n(C)?(t(),i(g,{key:0,class:"input-ele",value:n(A).name,disabled:!0,title:"用户"},null,8,["value"])):o("",!0),1==n(C)?(t(),i(g,{key:1,class:"input-ele",value:n(A).email,disabled:!0,title:"邮箱"},null,8,["value"])):o("",!0),0==n(C)?(t(),i(h,{key:2,class:"input-ele",ref_key:"imagecode",ref:f},null,512)):o("",!0),1==n(C)?(t(),i(k,{key:3,class:"input-ele",ref_key:"emailcode",ref:w},null,512)):o("",!0),2==n(C)?(t(),i(g,{key:4,ref_key:"passwordInput",ref:j,class:"input-ele",type:"password",title:"新密码",value:n($),"onUpdate:value":a[0]||(a[0]=e=>v($)?$.value=e.target.value:$=e.target.value),reminder:["密码太短","密码太长","密码需要包含数字","密码需要包含字母","密码不能包含特殊字符"],tester:e=>(n(b).refreshReminder(n(z),e),e.length<6?1:e.length>32?2:/^(?=.*[0-9]).{6,32}$/.test(e)?/^(?=.*[a-zA-Z]).{6,32}$/.test(e)?/^[a-zA-Z0-9]{6,32}$/.test(e)?0:5:4:3)},null,8,["value","tester"])):o("",!0),2==n(C)?(t(),i(g,{key:5,ref_key:"passwordInput2",ref:b,class:"input-ele",type:"password",title:"确认密码",value:n(z),"onUpdate:value":a[1]||(a[1]=e=>v(z)?z.value=e.target.value:z=e.target.value),reminder:["密码不匹配"],tester:(e,a=n($))=>e===a?0:1},null,8,["value","tester"])):o("",!0),u(y,{class:"input-ele",value:2===n(C)?"完成":"下一步",onClick:a[2]||(a[2]=e=>function(){if(0===C.value&&f.value.check().then((()=>{C.value=1})),1===C.value)w.value.check().then((()=>{C.value=2}));else{for(let e of I){if(-1==e.value.wrong)return void d(`请填写${e.value.title}字段`);if(0!=e.value.wrong)return void d(e.value.reminder[e.value.wrong-1])}m($.value).then((()=>{d("密码修改成功").then((()=>{location.href="/user/"}))}))}}())},null,8,["value"])])],64))}},[["__scopeId","data-v-81e9121c"]])).mount("#app");
